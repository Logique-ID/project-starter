<!-- Generated by SpecStory, Markdown v2.1.0 -->

<!-- cursor Session 31ede39a-a8c8-46b2-aab0-2501842f6a4e (2026-01-12 00:52Z) -->

# Splash screen usage in brick templates (2026-01-12 00:52Z)

_**User (2026-01-12 01:36Z)**_

 @src/brick.yaml @src/__brick__
Detect usage of splash screen inside brick template

---

_**Agent (model claude-4.5-opus-high-thinking, mode Ask)**_

<think><details><summary>Thought Process</summary>
The user wants me to detect how splash screen functionality is used inside the brick template. I need to search through the `__brick__` directory to find all references to splash screen implementation.

Let me search for splash-related code in the template.</details></think>

---

<tool-use data-tool-type="search" data-tool-name="grep">
<details>
<summary>Tool use: **grep** • Grep for "splash" in "/Users/cirimin/Logique/Project Starter/project-starter/src/__brick__" • 23 matches</summary>

Output mode: content


| File | Content | Line |
|------|------|------|
| `src/__brick__/\{{project_name\}}/pubspec.yaml` | `# launcher icons & splash` | L28 |
| `src/__brick__/\{{project_name\}}/pubspec.yaml` | `flutter_native_splash: 2.4.7` | L30 |
| `src/__brick__/\{{project_name\}}/pubspec.yaml` | `# Flutter Native Splash configuration` | L86 |
| `src/__brick__/\{{project_name\}}/pubspec.yaml` | `flutter_native_splash:` | L87 |
| `src/__brick__/\{{project_name\}}/pubspec.yaml` | `image: "assets/common/app-splash.png"` | L89 |
| `src/__brick__/\{{project_name\}}/pubspec.yaml` | `image: "assets/common/app-splash.png"` | L93 |
| `src/__brick__/\{{project_name\}}/pubspec.lock` | `flutter_native_splash:` | L510 |
| `src/__brick__/\{{project_name\}}/pubspec.lock` | `name: flutter_native_splash` | L513 |
| `src/__brick__/\{{project_name\}}/lib/initializer.dart` | `import 'package:flutter_native_splash/flutter_native_splash.dart';` | L4 |
| `src/__brick__/\{{project_name\}}/lib/initializer.dart` | `FlutterNativeSplash.preserve(widgetsBinding: widgetsBinding);` | L13 |
| `src/__brick__/\{{project_name\}}/lib/src/routing/app_startup.dart` | `import 'package:flutter_native_splash/flutter_native_splash.dart';` | L3 |
| `src/__brick__/\{{project_name\}}/lib/src/routing/app_startup.dart` | `FlutterNativeSplash.remove();` | L27 |
| `src/__brick__/\{{project_name\}}/lib/src/routing/app_startup.dart` | `///can be designed as splash screen` | L53 |
| `src/__brick__/\{{project_name\}}/android/app/src/main/res/values-night/styles.xml` | `<!-- Show a splash screen on the activity. Automatically removed when` | L5 |
| `src/__brick__/\{{project_name\}}/android/app/src/main/res/values/styles.xml` | `<!-- Show a splash screen on the activity. Automatically removed when` | L5 |
| `src/__brick__/\{{project_name\}}/android/app/src/main/res/values-night-v31/styles.xml` | `<item name="android:windowSplashScreenBackground">#ffffff</item>` | L9 |
| `src/__brick__/\{{project_name\}}/android/app/src/main/res/values-night-v31/styles.xml` | `<item name="android:windowSplashScreenAnimatedIcon">@drawable/android12splash</item>` | L10 |
| `src/__brick__/\{{project_name\}}/android/app/src/main/res/values-night-v31/styles.xml` | `<item name="android:windowSplashScreenIconBackgroundColor">#FFFFFF</item>` | L11 |
| `src/__brick__/\{{project_name\}}/android/app/src/main/res/values-v31/styles.xml` | `<item name="android:windowSplashScreenBackground">#ffffff</item>` | L9 |
| `src/__brick__/\{{project_name\}}/android/app/src/main/res/values-v31/styles.xml` | `<item name="android:windowSplashScreenAnimatedIcon">@drawable/android12splash</item>` | L10 |
| `src/__brick__/\{{project_name\}}/android/app/src/main/res/values-v31/styles.xml` | `<item name="android:windowSplashScreenIconBackgroundColor">#FFFFFF</item>` | L11 |
| `src/__brick__/\{{project_name\}}/android/app/src/main/res/drawable-v21/launch_background.xml` | `<bitmap android:gravity="center" android:src="@drawable/splash"/>` | L7 |
| `src/__brick__/\{{project_name\}}/android/app/src/main/res/drawable/launch_background.xml` | `<bitmap android:gravity="center" android:src="@drawable/splash"/>` | L7 |


</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Let me look at the key files to understand how splash screen is implemented in more detail. I should check the pubspec.yaml for the full configuration and the dart files that use it.</details></think>

---

Let me get more details on the key files to understand the full splash screen implementation:

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: /Users/cirimin/Logique/Project Starter/project-starter/src/__brick__/{{project_name}}/pubspec.yaml</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: /Users/cirimin/Logique/Project Starter/project-starter/src/__brick__/{{project_name}}/lib/initializer.dart</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: /Users/cirimin/Logique/Project Starter/project-starter/src/__brick__/{{project_name}}/lib/src/routing/app_startup.dart</summary>

</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Now I have a clear picture of how splash screen is used in the brick template. Let me also check if there's any conditional usage based on the `use_splash` variable from brick.yaml.</details></think>

---

Let me also check if there's any conditional mustache templating for the splash screen feature:

---

<tool-use data-tool-type="search" data-tool-name="grep">
<details>
<summary>Tool use: **grep** • Grep for "use_splash|#use_splash|/use_splash" in "/Users/cirimin/Logique/Project Starter/project-starter/src/__brick__" • 0 matches</summary>

Output mode: content


_No matches found_

</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Interesting! There's no conditional templating for `use_splash` in the brick template itself. The `use_splash` variable is only used in `post_gen.dart` (which we saw earlier) to conditionally run the splash generation command. Let me also check the pre_gen.dart and helper.dart to understand the full picture.</details></think>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: /Users/cirimin/Logique/Project Starter/project-starter/src/hooks/helper.dart</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: /Users/cirimin/Logique/Project Starter/project-starter/src/hooks/pre_gen.dart</summary>

</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Now I have a complete picture of how splash screen is used in the brick template. Let me also check the splash asset file.</details></think>

---

<tool-use data-tool-type="search" data-tool-name="file_search">
<details>
            <summary>Tool use: **file_search** • Searched codebase "app-splash" • **10** results</summary>
        
| File |
|------|
| `/Users/cirimin/Logique/Project Starter/project-starter/src/__brick__/{{project_name}}/assets/common/app-splash.png` |
| `/Users/cirimin/Logique/Project Starter/project-starter/src/__brick__/{{project_name}}/android/app/src/main/res/drawable-hdpi/splash.png` |
| `/Users/cirimin/Logique/Project Starter/project-starter/src/__brick__/{{project_name}}/android/app/src/main/res/drawable-mdpi/splash.png` |
| `/Users/cirimin/Logique/Project Starter/project-starter/src/__brick__/{{project_name}}/android/app/src/main/res/drawable-xhdpi/splash.png` |
| `/Users/cirimin/Logique/Project Starter/project-starter/src/__brick__/{{project_name}}/android/app/src/main/res/drawable-xxhdpi/splash.png` |
| `/Users/cirimin/Logique/Project Starter/project-starter/src/__brick__/{{project_name}}/android/app/src/main/res/drawable-xxxhdpi/splash.png` |
| `/Users/cirimin/Logique/Project Starter/project-starter/src/__brick__/{{project_name}}/android/app/src/main/res/drawable-hdpi/android12splash.png` |
| `/Users/cirimin/Logique/Project Starter/project-starter/src/__brick__/{{project_name}}/android/app/src/main/res/drawable-mdpi/android12splash.png` |
| `/Users/cirimin/Logique/Project Starter/project-starter/src/__brick__/{{project_name}}/android/app/src/main/res/drawable-xhdpi/android12splash.png` |
| `/Users/cirimin/Logique/Project Starter/project-starter/src/__brick__/{{project_name}}/android/app/src/main/res/drawable-xxhdpi/android12splash.png` |

</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Now I have a comprehensive view. Let me summarize my findings about splash screen usage in the brick template.</details></think>

---

Here's a complete breakdown of splash screen usage in the brick template:

## Splash Screen Detection Summary

### 1. Configuration Variable (`brick.yaml`)

```35:36:src/brick.yaml
  use_splash:
    type: boolean
```

The `use_splash` boolean variable controls whether splash screen setup is performed.

---

### 2. Pre-generation Hook (`pre_gen.dart`)

```24:34:src/hooks/pre_gen.dart
  // Check if use_splash is true
  final useSplash = context.vars['use_splash'] as bool? ?? false;

  if (useSplash) {
    // Only prompt for app_splash_path if use_splash is true
    final splashPath = context.logger.prompt(
      'Enter path to your app splash (or press Enter to skip)',
      defaultValue: '',
    );
    context.vars['app_splash_path'] = splashPath;
  }
```

If `use_splash` is true, prompts for a custom splash image path.

---

### 3. Post-generation Hook (`post_gen.dart`)

```84:103:src/hooks/post_gen.dart
  // Use app splash if provided
  final useSplash = context.vars['use_splash'] as bool? ?? false;
  if (useSplash) {
    // Apply custom app splash if provided
    final appSplashPath = context.vars['app_splash_path'] as String?;
    if (appSplashPath != null && appSplashPath.isNotEmpty) {
      // ... copies splash image and runs flutter_native_splash:create
    }
  }
```

---

### 4. Template Files (Always Included - No Conditional)

| Location | Purpose |
|----------|---------|
| `pubspec.yaml` | `flutter_native_splash: 2.4.7` dependency + configuration (lines 86-93) |
| `lib/initializer.dart` | `FlutterNativeSplash.preserve()` on app startup |
| `lib/src/routing/app_startup.dart` | `FlutterNativeSplash.remove()` after initialization |
| `assets/common/app-splash.png` | Default splash image |
| `android/app/src/main/res/drawable*/splash.png` | Pre-generated Android splash assets |
| `android/app/src/main/res/drawable*/android12splash.png` | Android 12+ splash assets |
| Android `styles.xml` files | Native splash screen styling |

---

### ⚠️ Issue Detected

The `use_splash` variable only controls:
1. Whether to prompt for a custom splash path
2. Whether to run `flutter_native_splash:create` post-generation

**It does NOT conditionally exclude:**
- The `flutter_native_splash` dependency from `pubspec.yaml`
- The `FlutterNativeSplash.preserve()` / `FlutterNativeSplash.remove()` code in Dart files
- Default splash assets

This means **splash screen code is always included** in the generated project, regardless of `use_splash` value. The variable only affects whether a *custom* splash image replaces the default and regenerates native assets.

If you want `use_splash: false` to completely remove splash functionality, the template files would need Mustache conditionals like `{{#use_splash}}...{{/use_splash}}`.

---

_**User (2026-01-12 01:36Z)**_

Yes, i want to make it dynamic based on use_splash value, execute it

---

_**Agent (model claude-4.5-opus-high-thinking, mode Agent)**_

<think><details><summary>Thought Process</summary>
The user wants me to make the splash screen functionality dynamic based on the `use_splash` value. This means:

1. In the template files, I need to add Mustache conditionals (`{{#use_splash}}...{{/use_splash}}`) to:
   - `pubspec.yaml` - wrap the `flutter_native_splash` dependency and configuration
   - `lib/initializer.dart` - wrap the `FlutterNativeSplash.preserve()` code and import
   - `lib/src/routing/app_startup.dart` - wrap the `FlutterNativeSplash.remove()` code and import

2. The splash assets will still be included but won't be used if `use_splash` is false.

Let me start implementing these changes.</details></think>

---

I'll make the splash screen functionality dynamic based on the `use_splash` value. This requires adding Mustache conditionals to the template files.

---

<tool-use data-tool-type="task" data-tool-name="todo_write">
<details><summary>Tool use: **todo_write** • Todo List</summary>

- [-] Add Mustache conditionals to pubspec.yaml for splash dependency & config
- [ ] Add Mustache conditionals to initializer.dart for splash preserve
- [ ] Add Mustache conditionals to app_startup.dart for splash remove

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: /Users/cirimin/Logique/Project Starter/project-starter/src/__brick__/{{project_name}}/pubspec.yaml</summary>

</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Now I'll update the pubspec.yaml to wrap splash-related parts with Mustache conditionals.</details></think>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: /Users/cirimin/Logique/Project Starter/project-starter/src/__brick__/{{project_name}}/pubspec.yaml</summary>

**Chunk 1**
Lines added: 4, lines removed: 1

```diff
@@ -26,7 +26,10 @@
    riverpod_annotation: 3.0.3
  
-   # launcher icons &amp; splash
+   # launcher icons
    flutter_launcher_icons: 0.14.4
+   {{#use_splash}}
+   # splash screen
    flutter_native_splash: 2.4.7
+   {{/use_splash}}
  
    # firebase
```

</details>

</tool-use>

---

<think><details><summary>Thought Process</summary>
Now wrap the flutter_native_splash configuration section.</details></think>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: /Users/cirimin/Logique/Project Starter/project-starter/src/__brick__/{{project_name}}/pubspec.yaml</summary>

**Chunk 1**
Lines added: 1, lines removed: undefined

```diff
@@ -87,4 +87,5 @@
      image_path: "assets/common/app-icon.png"
  
+ {{#use_splash}}
  # Flutter Native Splash configuration
  flutter_native_splash:
```

**Chunk 2**
Lines added: 1, lines removed: undefined

```diff
@@ -95,4 +96,5 @@
      icon_background_color: "#FFFFFF"
      image: "assets/common/app-splash.png"
+ {{/use_splash}}
  
  # Flavorizr configuration
```

</details>

</tool-use>

---

<think><details><summary>Thought Process</summary>
Now let me update the initializer.dart file to add Mustache conditionals for the splash import and preserve call.</details></think>

---

<tool-use data-tool-type="task" data-tool-name="todo_write">
<details><summary>Tool use: **todo_write** • Todo List</summary>

- [x] Add Mustache conditionals to pubspec.yaml for splash dependency & config
- [-] Add Mustache conditionals to initializer.dart for splash preserve
- [ ] Add Mustache conditionals to app_startup.dart for splash remove

</details>
</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: /Users/cirimin/Logique/Project Starter/project-starter/src/__brick__/{{project_name}}/lib/initializer.dart</summary>

**Chunk 1**
Lines added: 2, lines removed: undefined

```diff
@@ -2,5 +2,7 @@
  import 'package:firebase_messaging/firebase_messaging.dart';
  import 'package:flutter/material.dart';
+ {{#use_splash}}
  import 'package:flutter_native_splash/flutter_native_splash.dart';
+ {{/use_splash}}
  import 'package:flutter_riverpod/flutter_riverpod.dart';
  
```

</details>

</tool-use>

---

<think><details><summary>Thought Process</summary>
Now wrap the FlutterNativeSplash.preserve() call.</details></think>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: /Users/cirimin/Logique/Project Starter/project-starter/src/__brick__/{{project_name}}/lib/initializer.dart</summary>

**Chunk 1**
Lines added: 5, lines removed: 1

```diff
@@ -11,7 +11,11 @@
  
  Future&lt;void&gt; initializeApp({required FirebaseOptions firebaseOptions}) async {
+   {{#use_splash}}
    final widgetsBinding = WidgetsFlutterBinding.ensureInitialized();
- 
    FlutterNativeSplash.preserve(widgetsBinding: widgetsBinding);
+   {{/use_splash}}
+   {{^use_splash}}
+   WidgetsFlutterBinding.ensureInitialized();
+   {{/use_splash}}
  
    await Firebase.initializeApp(options: firebaseOptions);
```

</details>

</tool-use>

---

<think><details><summary>Thought Process</summary>
Now update app_startup.dart for the splash remove functionality.</details></think>

---

<tool-use data-tool-type="task" data-tool-name="todo_write">
<details><summary>Tool use: **todo_write** • Todo List</summary>

- [x] Add Mustache conditionals to pubspec.yaml for splash dependency & config
- [x] Add Mustache conditionals to initializer.dart for splash preserve
- [-] Add Mustache conditionals to app_startup.dart for splash remove

</details>
</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: /Users/cirimin/Logique/Project Starter/project-starter/src/__brick__/{{project_name}}/lib/src/routing/app_startup.dart</summary>

**Chunk 1**
Lines added: 2, lines removed: undefined

```diff
@@ -1,5 +1,7 @@
  import 'package:flutter/foundation.dart';
  import 'package:flutter/material.dart';
+ {{#use_splash}}
  import 'package:flutter_native_splash/flutter_native_splash.dart';
+ {{/use_splash}}
  import 'package:flutter_riverpod/flutter_riverpod.dart';
  import 'package:riverpod_annotation/riverpod_annotation.dart';
```

</details>

</tool-use>

---

<think><details><summary>Thought Process</summary>
Now wrap the FlutterNativeSplash.remove() call.</details></think>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: /Users/cirimin/Logique/Project Starter/project-starter/src/__brick__/{{project_name}}/lib/src/routing/app_startup.dart</summary>

**Chunk 1**
Lines added: 2, lines removed: undefined

```diff
@@ -26,6 +26,8 @@
    await ref.watch(appLocalizationRepositoryProvider).readLocalization(ref);
    await ref.read(firebaseServiceProvider).init();
+   {{#use_splash}}
  
    FlutterNativeSplash.remove();
+   {{/use_splash}}
  }
  
```

</details>

</tool-use>

---

<think><details><summary>Thought Process</summary>
Now let me verify the changes are correct by reading the updated files.</details></think>

---

<tool-use data-tool-type="task" data-tool-name="todo_write">
<details><summary>Tool use: **todo_write** • Todo List</summary>

- [x] Add Mustache conditionals to pubspec.yaml for splash dependency & config
- [x] Add Mustache conditionals to initializer.dart for splash preserve
- [x] Add Mustache conditionals to app_startup.dart for splash remove

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: /Users/cirimin/Logique/Project Starter/project-starter/src/__brick__/{{project_name}}/pubspec.yaml</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: /Users/cirimin/Logique/Project Starter/project-starter/src/__brick__/{{project_name}}/lib/initializer.dart</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: /Users/cirimin/Logique/Project Starter/project-starter/src/__brick__/{{project_name}}/lib/src/routing/app_startup.dart</summary>

</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Let me also check the rest of pubspec.yaml to make sure the splash configuration section was updated properly.</details></think>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: /Users/cirimin/Logique/Project Starter/project-starter/src/__brick__/{{project_name}}/pubspec.yaml</summary>

</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
All changes are in place. The splash screen functionality is now dynamic based on the `use_splash` value:

1. **pubspec.yaml**: 
   - `flutter_native_splash` dependency is wrapped with `{{#use_splash}}...{{/use_splash}}`
   - `flutter_native_splash` configuration section is wrapped with `{{#use_splash}}...{{/use_splash}}`

2. **initializer.dart**:
   - Import is wrapped with `{{#use_splash}}...{{/use_splash}}`
   - `FlutterNativeSplash.preserve()` is wrapped with `{{#use_splash}}...{{/use_splash}}`
   - Added `{{^use_splash}}WidgetsFlutterBinding.ensureInitialized();{{/use_splash}}` as fallback

3. **app_startup.dart**:
   - Import is wrapped with `{{#use_splash}}...{{/use_splash}}`
   - `FlutterNativeSplash.remove()` is wrapped with `{{#use_splash}}...{{/use_splash}}`

All done! Let me provide a summary to the user.</details></think>

---

Done! I've made the splash screen functionality dynamic based on the `use_splash` value. Here's a summary of the changes:

## Changes Made

### 1. `pubspec.yaml`
- Wrapped `flutter_native_splash` dependency with `{{#use_splash}}...{{/use_splash}}`
- Wrapped the `flutter_native_splash` configuration section with `{{#use_splash}}...{{/use_splash}}`

### 2. `lib/initializer.dart`
- Wrapped the import with `{{#use_splash}}...{{/use_splash}}`
- Wrapped `FlutterNativeSplash.preserve(widgetsBinding: widgetsBinding)` with conditional
- Added fallback `WidgetsFlutterBinding.ensureInitialized()` when splash is disabled using `{{^use_splash}}...{{/use_splash}}`

### 3. `lib/src/routing/app_startup.dart`
- Wrapped the import with `{{#use_splash}}...{{/use_splash}}`
- Wrapped `FlutterNativeSplash.remove()` with `{{#use_splash}}...{{/use_splash}}`

## Result

Now when generating a project:
- **`use_splash: true`** → Full splash screen support with `flutter_native_splash` package
- **`use_splash: false`** → No splash dependency, no splash code, just standard `WidgetsFlutterBinding.ensureInitialized()`

---

