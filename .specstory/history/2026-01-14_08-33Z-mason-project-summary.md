<!-- Generated by SpecStory, Markdown v2.1.0 -->

<!-- cursor Session 9d16af1d-b353-4534-9c1c-b5d369944006 (2026-01-14 08:33Z) -->

# Mason project summary (2026-01-14 08:33Z)

_**User (2026-01-14 07:24Z)**_

summary with detail this mason project for me

---

_**Agent (model default, mode Ask)**_

<think><details><summary>Thought Process</summary>
**Reviewing mason project details**

I see the user wants a summary with details about the mason project. I should focus on inspecting the necessary components, especially the mason.yaml file, src/brick, and reference materials. I plan to read files and check the directory structure to gather the information. While I want to provide thorough details, I’ll keep it balanced since the user specified a preference for a summary. I'll proceed with using the tools to collect all relevant data.</details></think>

---

I’ll first inspect the Mason configuration and the brick template structure, then look at the reference Flutter app to explain how everything ties together (hooks, scripts, flavors, Firebase, localization, etc.). I’ll keep it descriptive but focused so you get a clear mental model of the project.

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: /Users/cirimin/Logique/Project Starter/project-starter/mason.yaml</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: /Users/cirimin/Logique/Project Starter/project-starter/src/brick.yaml</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="generic" data-tool-name="list_dir">
<details>
            <summary>Tool use: **list_dir** • Listed directory, 0 results</summary>
        
No results found
</details>
</tool-use>

---

<tool-use data-tool-type="generic" data-tool-name="list_dir">
<details>
            <summary>Tool use: **list_dir** • Listed directory, 0 results</summary>
        
No results found
</details>
</tool-use>

---

<tool-use data-tool-type="generic" data-tool-name="list_dir">
<details>
            <summary>Tool use: **list_dir** • Listed directory, 0 results</summary>
        
No results found
</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: /Users/cirimin/Logique/Project Starter/project-starter/README.md</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: /Users/cirimin/Logique/Project Starter/project-starter/src/README.md</summary>

</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
**Exploring tech stack details**

I’m thinking about summarizing the high-level aspects of what the brick technology does. I need to touch on the tech stack, structure, hooks, and reference folder. My goal is to keep it concise but still detailed enough to provide valuable insights. I want to ensure that the summary includes essential information while being approachable. Let’s break down these components clearly to make them easy to understand!</details></think>

---

### High-level summary

This repo is a **Mason brick** called `starter` that generates a **production-ready Flutter app** with:

- **Flavors**: dev, stg, prod for Android & iOS
- **State management**: Riverpod 3 with codegen
- **Routing**: GoRouter with typed routes
- **Local storage**: Sembast (encrypted)
- **Networking**: Dio + Alice (optional)
- **Firebase**: core + messaging + FlutterFire CLI wiring (optional)
- **Localization**: EN + ID via ARB (optional)
- **UI infra**: ScreenUtil-based responsive layout, theming, reusable widgets
- **Nice-to-haves**: optional custom app icon, native splash, notifications

Running `mason make starter` scaffolds a full Flutter project, wires configs, and runs setup scripts automatically.

---

### Mason configuration & variables

- **`mason.yaml`** at repo root:

  - Registers a single local brick:

    ```yaml
    bricks:
      starter:
        path: src
    ```

- **`src/brick.yaml`** defines the brick:

  - **Metadata**:
    - `name: starter`
    - `description: A starter brick for a new Flutter project with flavors (dev, stg, prod), Firebase, Riverpod, and more.`
    - `version: 0.1.4`
    - `environment.mason: ^0.1.2`

  - **Variables / prompts** (interactive + overridable via CLI):

    - **`project_name` (string)**: snake_case project name, used as root folder and `pubspec.yaml` name.
    - **`app_name` (string)**: human-readable display name on device.
    - **`app_id` (string)**: bundle/application ID (e.g. `com.example.myapp`), used for Android package and iOS bundle id.
    - **`custom_icon` (bool)**: whether to use a custom app icon.
    - **`use_splash` (bool)**: whether to configure a native splash screen.
    - **`use_firebase` (bool)**: whether to include Firebase deps and configs.
    - **`use_localization` (bool)**: whether to include l10n stack.
    - **`use_dio` (bool)**: whether to include Dio + Alice HTTP stack.

  - The top-level README also references an extra **`firebase_project_id`** prompt and paths for custom icon/splash.

---

### Brick folder structure (`src/`)

The core brick implementation lives in `src/`:

- **`src/__brick__/`** – the **template project**; all files here are generated into the new project:

  - Root: `{{project_name}}/` – output project folder; inside:

    - **Flutter project config**:
      - `analysis_options.yaml`
      - `pubspec.yaml`
      - `pubspec.lock`
      - `README.md`
      - `test/widget_test.dart`

    - **Optional config files (toggled by vars)**:
      - `{{#use_firebase}}flutterfire-config.sh{{/use_firebase}}` – helper script to configure Firebase per flavor.
      - `{{#use_localization}}l10n.yaml{{/use_localization}}`
      - `{{#use_localization}}untranslated_msg_list.txt{{/use_localization}}`

    - **Android** (`android/`):
      - `app/build.gradle.kts`, `app/src/...`:
        - `dev/`, `stg/`, `prod/`: flavor-specific configs (e.g. `google-services.json` if Firebase enabled).
        - `main/` with the main Kotlin entry and common Android config.
      - Top-level `build.gradle.kts`, `settings.gradle.kts`, `gradle.properties`, `gradlew`, wrapper, etc.
      - `flavorizr.gradle.kts` for automated flavor configuration.

    - **iOS** (`ios/`):
      - `flavors/dev`, `flavors/stg`, `flavors/prod/`: flavor-specific `GoogleService-Info.plist` (when `use_firebase`).
      - Standard Flutter iOS project: `Runner/`, `Runner.xcodeproj/`, `Runner.xcworkspace/`, `Flutter/` xcconfigs.
      - Tests in `RunnerTests/RunnerTests.swift`, Podfile, etc.

    - **Assets** (`assets/`):
      - `android/`: Android app icons layers.
      - `common/`: shared icon, transparent icon, splash image.
      - `icons/`: SVGs like `icon_eye.svg`, `icon_eye_slash.svg`.

    - **Launcher/splash config**:
      - `flutter_launcher_icons.yaml`
      - Splash handled by config + post-gen script if `use_splash` is true.

    - **Dart app structure** (`lib/`):

      - **Root files**:
        - `flavor.dart` – flavor enum / helpers to distinguish dev/stg/prod.
        - `initializer.dart` – central app initialization (Firebase, DI, etc.).
        - `main_dev.dart`, `main_stg.dart`, `main_prod.dart` – entrypoints per flavor (each sets proper flavor/env and points to the shared `App` widget).

      - **`lib/src/` module layout** (mirrors reference app; details visible in `ref`):

        - **`app.dart`** – likely root `App` widget configuring router, theme, l10n, etc.

        - **`common_widget/`**:
          - Reusable widgets, e.g., `async_value_widget`, `connection_listener_widget`, `primary_button`, `form/custom_text_form_field`, snackbars, etc.

        - **`constant/`**:
          - `assets_constant.dart`, `constants.dart`, `error_message.dart` – central constants for strings, routes, assets, error messages.

        - **`core/`**:
          - `mixins/` (e.g., `mounted_state_mixin`, `logger_mixin`, etc.) – shared low-level behaviors and helpers.

        - **`feature/`**:
          - Modular feature folders like:
            - `authentication/` (data + domain)
            - `login/` (presentation + logic)
            - `home/`, `berita/`, `faq/`, `kegiatan/`, `laporan/`, `main_nav/` etc.
          - Each uses **Riverpod** (with codegen) and the shared router, theme, etc.

        - **`localization/`** (if `use_localization`):
          - `app_en.arb`, `app_id.arb` – translation catalogs.
          - Generated and hand-written localization classes:
            - `app_localizations.dart`, `app_localizations_en.dart`, `app_localizations_id.dart`
            - `app_localization_repository.dart` (+ `.g.dart`)
            - `app_localizations_provider.dart`
            - `app_localizations_context.dart`
            - `string_hardcoded.dart` (extension for marking hard-coded strings if l10n disabled).

        - **`routing/`**:
          - `app_router.dart` / `.g.dart` – GoRouter configuration (typed routes, route definitions).
          - `app_startup.dart` / `.g.dart` – startup workflow (e.g., splash → auth → main).
          - `go_router_refresh_stream.dart` – helper to trigger route refreshes from streams (e.g., auth state).

        - **`service/`**:
          - `firebase/` – Firebase initialization/abstractions.
          - `notification/` – push notification handling.

        - **`theme/`**:
          - `app_color_theme.dart`, `app_sizes.dart`, `app_text_theme.dart`, `app_theme.dart` – central place for colors/typography/spacing.

        - **`utils/`**:
          - General utilities (`common_utils.dart`).
          - `data_source_config/` folder with data source / endpoint config helpers.
          - Plus Dio-specific utilities when `use_dio` is enabled:
            - `dio_config.dart`: central HTTP client config.
            - `cancel_token_ref.dart`: cancel token handling for requests.

- **`src/hooks/`** – Mason **pre/post generation hooks**:

  - `pre_gen.dart`:
    - Runs **before** files are generated.
    - Handles extra prompts beyond `brick.yaml`, such as:
      - `firebase_project_id` (for FlutterFire).
      - Custom icon path if `custom_icon` is `true`.
      - Splash image path if `use_splash` is `true`.

  - `post_gen.dart`:
    - Runs **after** the project has been generated.
    - Automates follow-up tasks:
      - Creates the correct **Kotlin package directory** structure under `android/app/src/main/...` based on `app_id`.
      - Calls **`flutterfire config`** for all three flavors (`dev`, `stg`, `prod`) to generate `firebase_options_*.dart` and platform configs (if `use_firebase`).
      - If custom icon provided:
        - Copies the icon to the right asset directories.
        - Runs `flutter_launcher_icons` to generate raster icons.
      - If splash provided:
        - Copies splash image to assets.
        - Runs `flutter_native_splash:create` to configure native splash.

  - `helper.dart`: shared utilities for `pre_gen` and `post_gen` (e.g., shell commands, path helpers, logging).

  - `build/hooks/...dill` files: compiled versions of the hooks used by Mason; you don’t edit these directly.

  - `pubspec.yaml` in `src/hooks/` declares hook dependencies (e.g., `mason`, `process_run`, etc.).

- **`src/README.md`** – brick-specific readme:
  - Reiterates features, variables, and explains what happens during pre/post gen.
  - Provides quick usage:

    ```bash
    mason make starter
    ```

  - Describes post-generation commands:
    - `./flutterfire-config.sh dev|stg|prod` (if needed)
    - `flutter pub get`
    - `dart run build_runner build --delete-conflicting-outputs`
    - `flutter run --flavor dev -t lib/main_dev.dart`

---

### Reference implementation (`ref/project-starter-ref/`)

- `ref/project-starter-ref/` is a **concrete example project** that the brick is based on.

  - Structure mirrors the template in `src/__brick__/{{project_name}}/`:
    - `lib/flavor.dart`, `initializer.dart`, `main_dev.dart`, `main_stg.dart`, `main_prod.dart`.
    - `lib/src/` with all the modules described above (features, localization, routing, services, theme, utils, etc.).
    - `firebase_options/` with `firebase_options_dev.dart`, `firebase_options_stg.dart`, `firebase_options_prod.dart` – shows what FlutterFire output looks like.

- Purpose:
  - Acts as **source-of-truth code** for the brick’s templates.
  - Lets you see the **intended behavior and architecture** of a fully generated app.
  - Helps you tweak the template (you can prototype changes in ref, then port into `__brick__`).

---

### How you use this project in practice

- **Install the brick** globally:

  ```bash
  mason add starter --git-url https://github.com/Logique-ID/project-starter.git --git-path src
  ```

- **Generate a new app**:

  ```bash
  mason make starter
  ```

  - You’ll be prompted for:
    - `project_name`, `app_name`, `app_id`
    - Flags: `custom_icon`, `use_splash`, `use_firebase`, `use_localization`, `use_dio`
    - If enabled: `firebase_project_id`, icon path, splash path.

- **Post generation**, inside the new project:

  ```bash
  flutter pub get
  dart run build_runner build --delete-conflicting-outputs
  flutter run --flavor dev -t lib/main_dev.dart
  ```

  - If Firebase auto-config fails or you need to re-run:

    ```bash
    ./flutterfire-config.sh dev
    ./flutterfire-config.sh stg
    ./flutterfire-config.sh prod
    ```

---

### Conceptual architecture of the generated app

- **Environments**: 3 flavors with separate app ids, Firebase configs, and entrypoints.
- **App startup**:
  - `main_<flavor>.dart` → `initializer.dart` → `App` widget (`app.dart`) → `app_router.dart` / `app_startup.dart`.
- **State management**:
  - Riverpod providers (with generated code) for features, services, and app-level state.
- **Navigation**:
  - GoRouter with typed routes, using streams (e.g., auth) to update via `go_router_refresh_stream.dart`.
- **Data layer**:
  - Local: Sembast (encrypted), plus data source configuration utilities.
  - Remote (optional): Dio client with Alice inspector, configured once and injected.
- **Cross-cutting**:
  - Localization, theming, responsive sizing, and shared UI widgets all centralized in `lib/src`.

If you want, I can next walk through a specific slice in detail (e.g., **how flavors are wired across Android/iOS/Dart**, or **how the Riverpod + GoRouter setup is structured**) so you can modify or extend the brick safely.

---

