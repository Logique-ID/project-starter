<!-- Generated by SpecStory, Markdown v2.1.0 -->

<!-- cursor Session f549f84a-db51-456b-896e-a0fe1f947839 (2026-01-14 09:14Z) -->

# Mason variable not replaced in readme (2026-01-14 09:14Z)

_**User (2026-01-14 07:24Z)**_

@src/__brick__/{{project_name}}/README.md on this readme, variable mason did not replace with brick value, any idea how?

---

_**Agent (model default, mode Ask)**_

<think><details><summary>Thought Process</summary>
**Investigating template variables**

The user is mentioning that the Mason brick template's README includes variables like "{{project_name}}" and "{{app_name}}", but those aren't being replaced when generating the project. I need to check the brick.yaml file and possibly some hooks to understand what's going wrong. I think I'll start by reading the files involved to see if I can pinpoint the issue. Let's dig in and figure this out!</details></think>

---

I'll first inspect the brick configuration to see how variables are defined, then check if `project_name` / `app_name` exist or are named differently. From there I can suggest the correct variable names or template syntax adjustments.

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: /Users/cirimin/Logique/Project Starter/project-starter/src/brick.yaml</summary>

</details>
</tool-use>

---



---

<tool-use data-tool-type="generic" data-tool-name="list_dir">
<details>
            <summary>Tool use: **list_dir** • Listed directory, 0 results</summary>
        
No results found
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
**Clarifying Mason Template Issues**

I think the user may have run the brick elsewhere. The question seems straightforward: in the template files under `src/__brick__`, Mason variables don’t substitute until you run brick to generate a project. If they opened `src/__brick__/{{project_name}}/README.md` after running, it wouldn’t change. They should check the generated project path instead. The README content should remain constant, only replacing `{{project_name}}` and `{{app_name}}`. I also plan to check `mason.yaml` for any mapping issues.
**Understanding Variable Evaluation in Mason**

I’m considering if the missing newline between sections is actually a problem here. The best answer to the user's query is yes, Mason evaluates variables inside folder names, but there’s a nuance. If the brick path includes `{{project_name}}/README.md`, it could lead to confusion. They might expect a human-friendly name like "My App," whereas the generated directory may reflect the snake_case version (like "my_app"). They mentioned that it "did not replace," indicating they want `app_name` instead.
**Addressing README Variable Replacement Issues**

I want to be clear: since `project_name` and `app_name` are properly defined, Mason should replace them. If you see raw `{{project_name}}` in the generated README, it’s likely because you're looking at the template file, not the output. Another possibility is that you're using a prebuilt Mason bundle that doesn't have your latest changes; running `mason cache clear` might help. Also, ensure your keys match if generated via `mason make starter`. Generally, the variables should always get replaced as intended!
**Suggesting a Quick Test**

I want to give a quick way to test things out. You can navigate to your project directory, like this: 

```bash
cd /Users/cirimin/Logique/Project\ Starter/project-starter
mason make starter -o ./_test
```

Then, open the README file located in `_test/<your_project_name>/README.md`. That should help clarify everything. Let’s make sure to keep responses concise!</details></think>

---

### Why you still see `{{project_name}}` in that README

The file you’re looking at:

`src/__brick__/{{project_name}}/README.md`

is the **template** file inside the brick, so Mason will **never** replace variables in that file itself. The `{{...}}` placeholders are only resolved when you run the brick and Mason writes out a **generated project** somewhere else.

Your `brick.yaml` is already correct:

```yaml
vars:
  project_name:
    type: string
  app_name:
    type: string
  # ...
```

and the README template:

```md
# {{project_name}}

{{app_name}} - A Flutter application.
```

is valid Mustache, so substitution will work.

### How to verify the replacement

Run the brick to a test output directory:

```bash
cd "/Users/cirimin/Logique/Project Starter/project-starter"
mason make starter -o ./test_output
```

Then open:

`test_output/<your_project_name>/README.md`

There you should see the actual values (e.g. `# my_app` and `My App - A Flutter application.`), while the template under `src/__brick__/{{project_name}}/README.md` will (and should) still show the `{{...}}` placeholders.

---

_**User (2026-01-14 07:24Z)**_

@simple look at readme, it's still use mustache

---

_**Agent (model default, mode Ask)**_

<think><details><summary>Thought Process</summary>
**Examining project template**

I need to check the `simple/README.md` to make sure it's still set up as a template. I’m asking myself why that’s the case: Is `simple` a generated project? From my exploration, it looks like it's actually a Flutter app, but the README contains placeholders like `{{project_name}}`. That suggests they might have copied a template instead of it being generated properly by Mason, or maybe they ran Mason without recognizing brick variables. I’ll need to verify that.</details></think>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: /Users/cirimin/Logique/Project Starter/project-starter/simple/README.md</summary>

</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
**Analyzing project setup**

I'm considering how to properly set up a project using the `mason` command. If I just copy files with `cp -r`, I end up with mustache placeholders. Instead, I should run `mason make starter -o simple` from the parent directory. If I see mustache after running it, perhaps I've run it incorrectly from inside the `simple` path. Even though `simple` seems to be a Flutter project, something must have gone wrong with variable substitutions, like if `README.md` wasn't rendered.
**Explaining project issues**

I've noticed that the `src/brick.yaml` is correct, but the `simple README` is identical to the template. It seems `simple` is just a copy of the template and hasn't been generated through `brick`. The simplest solution is to delete or back up the `simple` directory and then run `mason` to regenerate it. Alternatively, if the user wants to keep it as a reference project, they could run `mason` in a different folder, like `test_output/simple`. Additionally, conditions like `{{#use_firebase}}` won’t be processed until `brick` runs, causing those control blocks to disappear in the generated project.
**Providing commands for setup**

I need to give a clear, concise command set for setting up the project. The user should run the following from the project-starter root:

```bash
mason get
mason make starter -o simple
```

They should follow the prompts. If brick is globally installed or defined in `mason.yaml`, everything should work smoothly. If existing files need to be overwritten, they can add `--on-conflict overwrite`. It's essential to note that commands like `make setup-reference` or `make test` use sync scripts instead of mason. If they want to see replaced variables, they need to check `test_output/...`, not `src/__brick__`.</details></think>

---

You’re seeing Mustache in `simple/README.md` because `simple` is currently just a **copy of the template**, not a project actually **generated by Mason**.

In other words, Mason never rendered the variables for that folder, so the file is identical to `src/__brick__/{{project_name}}/README.md`.

### How to get a README with real values

From the repo root, generate a project with Mason instead of copying the template:

```bash
cd "/Users/cirimin/Logique/Project Starter/project-starter"

# Make sure Mason knows about the local brick (if not already)
mason get

# Generate a project into a fresh directory (e.g. simple_app)
mason make starter -o ./simple_app
```

Then open:

```text
/Users/cirimin/Logique/Project Starter/project-starter/simple_app/README.md
```

You should now see:

- `# <your_project_name>` instead of `# {{project_name}}`
- `<Your App Name> - A Flutter application.` instead of `{{app_name}} - A Flutter application.`
- The `{{#use_firebase}}` / `{{^use_firebase}}` blocks resolved according to your answers.

If you specifically want `simple/` to be the generated app, either:

- Delete/rename the existing `simple` folder and run:

  ```bash
  mason make starter -o ./simple
  ```

- Or run with overwrite (only if you’re okay clobbering what’s there):

  ```bash
  mason make starter -o ./simple --on-conflict overwrite
  ```

---

_**User (2026-01-14 07:24Z)**_

it should be simple not mustache

---

_**Agent (model default, mode Ask)**_

<think><details><summary>Thought Process</summary>
**Investigating README issues**

The user has generated a README file in their simple app, but it seems that the mustache wasn't applied. This might mean they copied files from the source directory instead of applying the brick process correctly. I need to take a closer look at that README to clarify what happened. Let’s see if there’s any more information in there that can help me understand why the brick wasn’t applied effectively!</details></think>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: /Users/cirimin/Logique/Project Starter/project-starter/simple_app/simple/README.md</summary>

</details>
</tool-use>

---



---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: /Users/cirimin/Logique/Project Starter/project-starter/mason.yaml</summary>

</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
**Clarifying project structure**

I need to keep my answer concise. It’s important to clarify that if the user generated a simple_app using `flutter create simple`, then the README file isn’t produced by Mason; it's just a template. To create a simple app, it should be generated with Mason. They might have run Mason incorrectly with `-o simple_app`, leading to src/__brick__, but we only saw the README. I could list the contents of the simple_app directory.</details></think>

---

<tool-use data-tool-type="generic" data-tool-name="list_dir">
<details>
            <summary>Tool use: **list_dir** • Listed directory, 0 results</summary>
        
No results found
</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: /Users/cirimin/Logique/Project Starter/project-starter/simple_app/simple/pubspec.yaml</summary>

</details>
</tool-use>

---



---

